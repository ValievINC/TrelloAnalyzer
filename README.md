# Анализатор Трелло
![demo-gif](for%20readme/trello-analyzer.gif)
## Квикстарт
Создайте базу данных: скопируйте код из [create-db](data/create_db.sql) 
в консоль MySQL и выполните.  
Конец.
## Как работает
В поиске выбираем название желаемой команды (списком выходят все команды, 
но поле работает как поиск, то есть при наборе части названия происходит 
сортировка списка)  
При нажатии на нужную команду или отправки названия из поля ввода с помощью 
enter происходит поиск команды и, если таковая есть, выводит информацию о ней 
(гиф выше), иначе выводит, что такая команда не найдена  

![search](for%20readme/search.PNG)  
поиск

![team-info](for%20readme/team-info.PNG)  
информация о команде

![search-error](for%20readme/search-error.PNG)  
ошибка

![charts](for%20readme/charts.PNG)  
диаграммы

## О диграммах
Для построения диаграмм используется ChartJS.  

### Левая верхняя
![bar-chart](for%20readme/bar-chart.PNG)  
Столбчатая диаграмма: рапределение карточек по столбикам.  
Горизонтальная ось - название столбика, вертикальная - количество карточек
в нём.  
Есть подписи.

### Правая верхняя
![pie-chart](for%20readme/pie-chart.PNG)  
Круговая диаграмма: распределение задач по участникам.  
Для полной информации можно наводить курсором на части диаграммы.

### Левая нижняя
![graph](for%20readme/graph.PNG)  
График: отражает статистику по добавлениям карточек.  
Горизонтальная ось - даты, вертикальная ось - количетво добавленных карточек 
в этот день.  
Есть подписи.

### Правая нижняя
![button](for%20readme/button.PNG)  
Не диаграмма.  
Кнопка, при нажатии на которую появляются название, описание 
случайной карточки, где эта карточка находится и ссылка на карточку.

## Изнутри
### Google lib
![google-lib](for%20readme/google-lib.PNG)  
Вот эти все страшные файлы: токены, ключи, quickstart, vendor с 15000 файлов - 
библиотека Гугла для получения данных из таблицы в Гугл доках. Подробнее об
этом можно прочитать 
[вот тут](https://developers.google.com/sheets/api/quickstart/php?hl=ru).  

### config.json
![config](for%20readme/config.PNG)  
[config.json](config.json) необходим для правильного заполнения базы данных
инфой из гугл таблицы.
* users  отвечает за заполнение таблицы users базы данных.  
Важные правила:
  * Ключ - название вопроса в гугл форме, при изменении/добавлении
  вопросов меняйте/добавляйте их в [config.json](config.json).
  * Значение - название колонки в базе даных, лучше названия в базе не менять :)
  * Колонки users:
    * name - имя участника
    * team_id - id проекта, устанавливается автоматически
    * role - роль в команде
* teams аналогично users отвечает за заполнение таблицы teams базы данных. 
    * Колонки users:
        * url - ссылка на доску Trello
        * team_name - название проекта
        * topic - описание проекта
* sheet_id - id гугл таблицы формы
* range - радиус забора данных из таблицы (из каких колонок надо брать инфу)  
если добавляете какие-нибудь вопросы в форму, количество заполняемых колонок
в таблице увеличится, необходимо будет поменять значение и тут.

### Алгоритм вкратце
Обновление базы данными из таблицы формы -> Получение данных из базы данных 
-> Передача данных в фронт -> Построение графиков  

## Остальные файлы
В данном пункте я разберу осатльные важные файлы.

### [index.php](index.php)
Собственно, он и запускается при открытии страницы, 
просто подключает необходимые файлы и получает инфу из базы данных.

### [update_db.php](update_db.php)
Файл обновления базы данных данными из гугл таблицы.

### [content.html](content.html)
Верстка сайта.

### [graphs.js](graphs.js)
Файл для построения графиков с помощью ChartJS.

### [DBConnection.php](DBConnection.php)
Класс подключения к базе данных.

### [style.css](style.css)
Файл стилей.

# Десктопное приложение
## Файлы
Приложение [app.exe](app/app.exe) находится в папке [app](app), в ней же
находятся [config.ini](app/config.ini),
[csv файл](app/OpenEduITIS-Лист1.csv) и папка
[scripts](app/scripts%20(non-build)).

### [app.exe](app/app.exe)
Собственно приложение для анализа прогресса задачи с Trello по предмету ИТИС.

### [config.ini](app/config.ini)
Необходимый для работы приложения файл.
Должен находится в одной папке с приложением.

### [scripts](app/scripts%20(non-build))
Папка с исходными Python скриптами приложения. Не нужна для работы приложения.
Это просто нескомпилированное приложение.

### [csv файл](app/OpenEduITIS-Лист1.csv)
csv файл - пример для тестирования/демонстрации работы приложения.

## Как с этим работать?
![no file](for%20readme/app-no-file.PNG)  
Запустив программу, видим то, что сейчас на скриншоте выше.  
С помощью верхней кнопки можно выбрать csv файл для анализа
(файл с ссылками на доски trello).

Далее в поле текстового ввода вводим название выходного csv файла - файла,
который получится в результате работы программы (тот же файл, но с
появившейся колонкой Result, в которой находятся результаты анализа
досок в процентах).

Также для удобства чтения можно выбрать пункт для создания дополнительного
xlsx файла с тем же названием. Содержание xlsx файла не отличается от csv,
но его удобнее читать, например, с помощью MS Excel.

Нижняя кнопка запускает программу и создаёт выходные файлы.

Следующее поле - поле лога программы, а ниже его - шкала прогресса.

![choosing file](for%20readme/app-choosing-file.PNG)  
Нажав на кнопку выбора файла открывается проводник для выбора.

![choosing file](for%20readme/app-file.PNG)  
После выбора файла текст на кнопке меняется на имя текущего
выбранного файла. На неё всё еще можно нажать, чтоб сменить файл.

![app finish](for%20readme/app-finished.PNG)  
Когда приложение завершает работу, можно снова воспользоваться им
без необходимости перезахода.

![app result](for%20readme/app-result.PNG)  
Выходные файлы создаются в той же папке с приложением.

![app source](for%20readme/app-file-source.PNG)  
Файл [OpenEduITIS-Лист1.csv](app/OpenEduITIS-Лист1.csv)
выбранный для анализа.

![app result csv](for%20readme/app-file-result-csv.PNG)  
Csv файл-результат demo.csv созданный приложением. Обратите внимание, что
это тот же [OpenEduITIS-Лист1.csv](app/OpenEduITIS-Лист1.csv),
но с добавленной колонкой result.

![app result xlsx](for%20readme/app-file-result-xlsx.PNG)  
Xlsx файл-результат demo.xlsx.

## [Файл конфигурации](app/config.ini)
С помощью данного файла можно менять некоторое содержимое приложения,
например, инструкции.

![app without modification](for%20readme/app-no-file.PNG)  
Зайдём в файл конфигурации.

![app config](for%20readme/app-config.PNG)  
И поменяем все значения для наглядности.

![app config modified](for%20readme/app-config-modified.PNG)

![app modified](for%20readme/app-modified.PNG)

